
INSURETECH
ОБНОВЛЕНИЕ АРХИТЕКТУРЫ
01.11.2024


ЦОД-ы системы распределены по регионам на зоны.
Это позволит соблюдать независимую от региона скорость получения веб страниц или данных по api.

В каждой зоне свой кластер k8s. Данный выбор сделан во избежание задержек при репликации кластера между регионами, связанными не качественным интернетом.

СУБД развернуто в кластере с узлами в разных зонах в режиме master-master. Здесь задержки в связи будут влиять на синхронность данных между регионами. Однако данные зоны создаются и читаются приемущественно пользователями той же зоны. Поэтому ухудшение пользовательского опыта, вызванное запросами данных другой зоны, не поступивших из-за плохой связи, маловероятно.

Масштабирование служб настраивать в кластере k8s горизонтальное. Это обеспечит зависимость количество подов от нагрузки.

Файловер стратегия бэкенда обеспечивается k8s. Шлюз API GW резервируется в режиме active-active, health-check мониторится со стороны GSLB (оранжевые стрелки).

Исторические данные записывать в режиме event sourcing.
Для уменьшения объема бэкапов создавать новую таблицу для исторических данных один раз за квартал. Предыдущую таблицу переливать в архивную бд. Архивную бд бэкапить только раз в квартал. Текущую бд бэкапить ежедневно.
